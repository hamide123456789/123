## آزمایش شماره یک : امواج فراصوت 💡

### هدف 🎯

در این آزمایش میخواهیم به کمک امواج رفت و برگشتی از ماژول <strong>اولتراسونیک</strong>، فاصله یک جسم تا ماژول را محاسبه کنیم و آن را بر روی صفحه نمایش LCD نشان دهیم.

---

### مواد و وسایل مورد نیاز 🛠️

<div align="right">
<table>
<thead>
<tr>
<th>ردیف</th><th>قطعه</th><th>تعداد</th>
</tr>
</thead>
<tbody align="center">
<tr>
<td>1</td><td>بردبورد</td><td>یک عدد</td>
</tr>
<tr>
<td>2</td><td>برد آردوینو UNO</td><td>یک عدد</td>
</tr>
<tr>
<td>3</td><td>سیم جامپر</td><td>بیست و دو عدد</td>
</tr>
<tr>
<td>4</td><td>کابل USB</td><td>یک عدد</td>
</tr>
<tr>
<td>5</td><td>پتانسیومتر</td><td>یک عدد</td>
</tr>
<tr>
<td>6</td><td>صفحه LCD</td><td>یک عدد</td>
</tr>
<tr>
<td>7</td><td>سنسور اولتراسونیک</td><td>یک عدد</td>
</tr>
</tbody>
</table>
</div>

---

### توضیحات کلی 📝

سنسور اولترا سونیک از دو قسمت تشکیل شده است: بخش Receiver ( گیرنده ) و بخش transmitter (فرستنده).  
عملکرد سنسور بدین صورت می باشد که بخش فرستنده یک سیگنال فراصوت ( که خارج از محدوده شنوایی انسان می باشد ) ارسال می کند و در صورتی که این سیگنال تا محدوده حداکثر 400 سانتی متری با یک مانع برخورد کرده و برگردد، بخش گیرنده آن را دریافت می کند و سپس فاصله بین زمان رفت و برگشت سیگنال محاسبه می شود.  
در نهایت با استفاده از فرمول ریاضی زیر و سرعت صوت ( 340 متر بر ثانیه ) می توان از زمان رفت و برگشت فاصله اجسام تا ماژول را محاسبه کرد:  
`فاصله = ( زمان رفت و برگشت / 2 ) * سرعت صوت`

---

### سورس کد 💻

```cpp
#include <LiquidCrystal.h>

LiquidCrystal lcd(12, 11, 7, 6, 5, 4);
int trig = 10;
int echo = 9;
int duration = 0;
int distance = 0;

void setup() {
  lcd.begin(16, 2);
  pinMode(trig, OUTPUT);
  pinMode(echo, INPUT);
}

void loop() {
  digitalWrite(trig, LOW);
  delayMicroseconds(2);
  digitalWrite(trig, HIGH);
  delayMicroseconds(10);
  digitalWrite(trig, LOW);

  duration = pulseIn(echo, HIGH);
  distance = (duration / 2) * 0.0343;

  lcd.print("Distance = ");
  lcd.setCursor(11, 0);
  lcd.print(distance);
  delay(500);
  lcd.clear();
}
```

---

### توصیف کد های برنامه 🧑🏻‍💻

ابتدا کتابخانه مربوط به ماژول LCD را به پروژه اضافه کرده و پین های خروجی آن را تنظیم می کنیم. در تابع setup، ماژول LCD را با متد begin راه اندازی کرده و همچنین پایه های سنسور اولتراسونیک را تنظیم می کنیم.  
در تابع loop، از طریق پایه خروجی trig ماژول اولتراسونیک امواج فراصوت به محیط می فرستد. سپس پایه echo که در واقع همان گیرنده می باشد این امواج را دریافت کرده و از طریق متد pulseIn فاصله بین زمان رفت و برگشت محاسبه شده و ما نیز خروجی این متد را در متغیر duration نگهداری می کنیم.  
سپس از طریق فرمولی که قبلا ذکر شد بر اساس زمان رفت و برگشت، فاصله از اشیا را محاسبه می کنیم و آن را در متغیر distance نگه می داریم.  
در نهایت از طریق متد print خروجی نهایی را در نمایشگر LCD نشان می دهیم و همچنین یک delay به اندازه 500 میلی ثانیه نیز تنظیم می کنیم تا داده های در حال نمایش هر نیم ثانیه یکبار آپدیت شوند.

---

### شرح کارکرد مدار به صورت ویدیویی 🎥

<br>

<div align="center">
<img src="/media/microprocessor_12.gif">
</div>

---

### شماتیک مدار 🗺️

<br>

<div align="center">
<img src="/media/schematic_10.jpg" width="600px" height="300px">
</div>

---

### توضیحات شماتیک مدار ✒️

<ol>
<li>
اتصالات LCD
<ul>
<li>پایه های 1 و 16 به Gnd</li>
<li>پایه های 2 و 15 به Vcc</li>
<li>پایه 3 به پایه وسط پتانسیومتر</li>
<li>پایه 4 ( rs ) به پین 12 آردوینو</li>
<li>پایه 5 به Gnd</li>
<li>پایه 6 ( en ) به پین 11 آردوینو</li>
<li>پایه های 11 تا 14 ( data ) به پین های 7 تا 4 آردوینو</li>
</ul>
</li>
<li>
اتصالات پتانسیومتر
<ul>
<li>پایه های طرفین یکی به Gnd و دیگری به Vcc</li>
<li>پایه وسطی به پایه 3 LCD</li>
</ul>
</li>
<li>
اتصالات اولتراسونیک
<ul>
<li>پایه 1 به Vcc</li>
<li>پایه 2 ( trig ) به پین 10 آردوینو</li>
<li>پایه 3 ( echo ) به پین 9 آردوینو</li>
<li>پایه 4 به Gnd</li>
</ul>
</li>
</ol>

---

### نتیجه گیری 👀

ماژول اولتراسونیک یک ماژول قدرتمند با کاربردهای فراوانی می باشد که با استفاده از آن می توان انواعی از تجهیزات مختلف را پیاده سازی کرد. از مشکلات این ماژول نیز می توان به محدود بودن دقت در حد سانتی متر (و نه کمتر) و همچنین محدود بودن زاویه ارسال و دریافت سیگنال که فقط در یک جهت می باشد اشاره کرد.
